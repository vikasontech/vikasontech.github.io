<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Vikas Blogs - Setup Keycloak with Docker </title>

    
    
    <meta content="keycloak, docker, setup, Technical" name="keywords">
    
    <meta content="Vikas Blogs - Introduction of Keycloak AAA" name="description">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    

    

    

    
    
    <script type="text/javascript" async
        src="/mathjax-3.0.0/tex-mml-chtml.js">
    </script>
    

    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/self/css/default.css">
    <script src="/layui/layui.js"></script>


    <link rel="stylesheet" async href="/self/css/markdown.min.css">
    <link rel="stylesheet" async href="/self/css/gallery.css">
    <link rel="stylesheet" async href="/font-awesome-4.7.0/css/font-awesome.min.css">
    <script src="/self/js/lazysizes.min.js" async></script></head>

<body>
    
    <header class="layui-header layui-bg-cyan">

    
        <a href=""><img src="/self/img/avater.jpg" class="layui-nav-img" style="margin-left:10px;margin-top:-10px"></a>
    
    
    <a class="nav-self-logo" href="/">
        Vikas Blogs
    </a>

    <ul class="layui-nav layui-layout-right layui-bg-cyan" lay-filter="">
        
        
        <li class="layui-nav-item" id="nav_big"><a href="/post/">Posts</a></li>
        

        

        
        <li class="layui-nav-item" id="nav_small">
            <a href="javascript:;">
                <i class="layui-icon layui-icon-app" style="font-size: 24px;"></i>
            </a>

            <dl class="layui-nav-child">
                
                <dd><a href="/post/">Posts</a></dd>
                

                
            </dl>
        </li>
    </ul>
</header>

<script>
layui.use('element', function(){
  var element = layui.element;
});
</script>
        <div id="content" style="min-height:80%">
<div class="layui-container" style="margin-bottom: 10px">
    

    <div class="layui-row layui-col-space10">
        <div class="layui-col-md12 layui-col-sm12 layui-col-xs12">
            <div class="layui-card single-card">
                <br />
                <blockquote class="layui-elem-quote markdown-body single-title" >
                    <h1>Setup Keycloak with Docker</h1>
                    <h3 style="margin-top:10px; margin-bottom:10px"> 
    <i class="layui-icon layui-icon-date" style="font-size: 24px; vertical-align: -2px;"></i>
    <span>2018-11-18</span>

    
    <i class="layui-icon layui-icon-tabs" style="font-size: 22px; vertical-align: 0px;"></i>
    
        <a href="/tags/keycloak/">
            <span class="layui-badge" style="vertical-align: 2px;">keycloak</span>
        </a>
    
        <a href="/tags/docker/">
            <span class="layui-badge" style="vertical-align: 2px;">docker</span>
        </a>
    
        <a href="/tags/setup/">
            <span class="layui-badge" style="vertical-align: 2px;">setup</span>
        </a>
    
    </br>

</h3>
<span class="reading-time">
    <i class="fas fa-clock"></i>
    Reading time: 3 Min(s)
</span>


                </blockquote>
                <div class="layui-card-body markdown-body single-content">
                    <p><strong>Introduction of Keycloak</strong></p>
<p>Open Source Identity and Access Management For Modern Applications and
Services. It add authentication to applications and secure services with
minimum fuss. No need to deal with storing users or authenticating
users. It&rsquo;s all available out of the box.</p>
<p>You&rsquo;ll even get advanced features such as User Federation, Identity
Brokering and Social Login.</p>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>Docker:</li>
</ul>
<p>Since we are using Docker to install Keycloak; it should be installed on
your machine. If it is not you can download and install it from the link
given below, it’s pretty straight forward.</p>
<ul>
<li><a href="https://docs.docker.com/docker-for-mac/" target="_blank">Mac/Linux</a></li>
<li><a href="https://docs.docker.com/docker-for-windows/install/" target="_blank">Windows</a></li>
</ul>
<p><strong>Create docker compose file</strong></p>
<p>We use keycloak with mysql database to persist the user data. Use the
below docker-compose.yml file to pull and start the docker server
docker-compose.yml</p>
<script type="application/javascript" src="https://gist.github.com/vikasontech/24c4ca4ec051b0ad22a912f19807a06a.js"></script>

<p>In docker compose file we povide default user name and password for the
keycloak use and described in the docker hub for the keycloak image. Our
mysql and keycloak server are running on the docker network
“Keycloak-network”. Start keycloak and mysql server</p>
<p>Run docker-compose up command on the terminal, once the server up you
can see the output as below -</p>
<p><img src="https://1.bp.blogspot.com/-YjgKqAuohoQ/W_-ZIs5DHbI/AAAAAAAAkRo/ZLgbb5qaDrY0Pol1uuei7rrlqVUhXwjNACEwYBhgL/s320/Screen%2BShot%2B2561-11-29%2Bat%2B14.44.31.png" alt="image"></p>
<p>Go the browser and type the url - http: //localhost:9001 Note: remember
we expose the port in the docker-compose file</p>
<p><img src="https://lh3.googleusercontent.com/XF8uOYI14dqFc6ns-PLgc_ewrxjIfryAwHofSAFKVA-dWe2FWzQ5Csu-24PAtvTszqOOXD_PZBSG5RtI4yH7JqAxvgCe-GhoGbnfV2b-xTZ0gpTd_KgDF1oAnw5UthP2WfLHfzOV" alt="image"></p>
<p>You can now login keycloak from the username and password you provided
in docker-compose file. In our case we use username admin and password
also admin</p>
<p><img src="https://lh5.googleusercontent.com/fBLFQeZcVyS_khIBWcdkQQCS_XutZeIhoW8XfCQDpOEovXz63dqaHpqWF80l4HYi7BhhqtGgPv9bsGlIv3dXqG0b3LMDhV6hcRawFpWizRdMdYSdCNq2CKUl8MMbmYp7R3GDvhrm" alt="image"></p>
<p>After login you will see the default realm master as below -</p>
<p><img src="https://lh3.googleusercontent.com/pzoH0ZM1x4QcdbP_MjoNYtOyCIWtrHHFg_WVBd3AwKFuSOxxakNMtbGFxPUX_k-Mb12VeCehREtpN1Bi9ME1Bp7_fs9pZbDt01_0k9S509CBTwumb5oo92eEcwjkzdNaQnbn3LOC" alt="image"></p>
<p><strong>Core concept and terms of keycloak -</strong></p>
<p><strong>Realms:</strong></p>
<p>A realm manages a set of users, credentials, roles, and groups. A user
belongs to and logs into a realm. Realms are isolated from one another
and can only manage and authenticate the users that they control.</p>
<p><strong>Groups:</strong></p>
<p>Groups manage groups of users. Attributes can be defined for a group.
You can map roles to a group as well. Users that become members of a
group inherit the attributes and role mappings that group defines.</p>
<p><strong>Clients:</strong></p>
<p>Clients are entities that can request Keycloak to authenticate a user.
Most often, clients are applications and services that want to use
Keycloak to secure themselves and provide a single sign-on solution.
Clients can also be entities that just want to request identity
information or an access token so that they can securely invoke other
services on the network that are secured by Keycloak.</p>
<p><strong>Client scopes:</strong></p>
<p>When a client is registered, you must define protocol mappers and role
scope mappings for that client. It is often useful to store a client
scope, to make creating new clients easier by sharing some common
settings. This is also useful for requesting some claims or roles to be
conditionally based on the value of scope parameter. Keycloak provides
the concept of a client scope for this.</p>
<p><strong>Client role:</strong></p>
<p>Clients can define roles that are specific to them. This is basically a
role namespace dedicated to the client.</p>
<p><strong>Identity token:</strong></p>
<p>A token that provides identity information about the user. Part of the
OpenID Connect specification. You can get more details about this terms
here !</p>
<p><strong>Conclusion:</strong></p>
<p>In this blog we learn how to setup keycloak using docker, in next blog
we will create an application and secure it using keycloak.</p>
<p><strong>Reference https:</strong></p>
<p><a href="https://www.keycloak.org/docs/latest/getting_started/index.html">https://www.keycloak.org/docs/latest/getting_started/index.html</a></p>
<p><a href="https://www.keycloak.org/docs/latest/server_admin/index.html">https://www.keycloak.org/docs/latest/server_admin/index.html</a></p>
</div>
            </div>
        </div>

        
    </div>
</div>


        </div><footer>
    

    <div class="layui-container">
        <div class="layui-row">
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs6">
              
            </div>
        </div>
        <div class="layui-row">
            
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs12">
                <a href="/"><p class="footer-url">home</p></a>
            </div>
            
            <div class="layui-col-md4 layui-col-sm6 layui-col-xs12">
                <a href="/about/"><p class="footer-url">About</p></a>
            </div>
            
        </div>
    </div>
    
    
    <div class="layui-container">
        <p class="copyright">Copyright © 2019–2020, Vikas Verma</p>
    </div>
</footer>

</body>
</html>
